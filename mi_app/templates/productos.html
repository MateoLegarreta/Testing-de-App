<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - TechFlow Solutions</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="productos-header">
        <ul>
            <li>
                <h2>Bienvenido, {{ usuario }}</h2>
            </li>
            <li>
                <img class="logo" src="{{ url_for('static', filename='images/logo.jpg') }}" alt="logo">
            </li>
            <li>
                <a href="{{ url_for('logout') }}" class="logout-btn">Cerrar sesi√≥n</a>
            </li>
        </ul>
    </nav>


    <div class="productos-container">
        <div class="filters-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="üîç Buscar productos por nombre...">
            </div>
            <div class="filter-group">
                <label for="categoryFilter">Categor√≠a:</label>
                <select id="categoryFilter">
                    <option value="">Todas</option>
                    <option value="Electr√≥nica">Electr√≥nica</option>
                    <option value="Ropa">Ropa</option>
                    <option value="Hogar">Hogar</option>
                    <option value="Deportes">Deportes</option>
                    <option value="Libros">Libros</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="sortPrice">Ordenar:</label>
                <select id="sortPrice">
                    <option value="">Sin ordenar</option>
                    <option value="asc">Precio: Menor a Mayor</option>
                    <option value="desc">Precio: Mayor a Menor</option>
                </select>
            </div>
        </div>

        <div class="results-count" id="resultsCount"></div>

        <div class="productos-grid" id="productosGrid"></div>

        <div class="no-results" id="noResults" style="display: none;">
            <div class="no-results-icon">üì¶</div>
            <h3>No se encontraron productos</h3>
            <p>Intenta ajustar los filtros de b√∫squeda</p>
        </div>

        <div class="pagination" id="pagination"></div>
    </div>

    <script>
        // Datos de ejemplo de productos
        const todosLosProductos = [
            { nombre: "Laptop Pro 15", categoria: "Electr√≥nica", precio: 1299.99 },
            { nombre: "Smartphone X", categoria: "Electr√≥nica", precio: 899.99 },
            { nombre: "Auriculares Bluetooth", categoria: "Electr√≥nica", precio: 149.99 },
            { nombre: "Camiseta Deportiva", categoria: "Ropa", precio: 29.99 },
            { nombre: "Pantal√≥n Casual", categoria: "Ropa", precio: 49.99 },
            { nombre: "Zapatillas Running", categoria: "Deportes", precio: 89.99 },
            { nombre: "L√°mpara LED", categoria: "Hogar", precio: 39.99 },
            { nombre: "Silla Ergon√≥mica", categoria: "Hogar", precio: 199.99 },
            { nombre: "Libro JavaScript", categoria: "Libros", precio: 34.99 },
            { nombre: "Tablet 10 pulgadas", categoria: "Electr√≥nica", precio: 349.99 },
            { nombre: "Reloj Inteligente", categoria: "Electr√≥nica", precio: 249.99 },
            { nombre: "Chaqueta Invierno", categoria: "Ropa", precio: 79.99 },
            { nombre: "Bal√≥n F√∫tbol", categoria: "Deportes", precio: 24.99 },
            { nombre: "Alfombra Moderna", categoria: "Hogar", precio: 69.99 },
            { nombre: "Libro Python", categoria: "Libros", precio: 39.99 },
            { nombre: "Mouse Inal√°mbrico", categoria: "Electr√≥nica", precio: 29.99 },
            { nombre: "Teclado Mec√°nico", categoria: "Electr√≥nica", precio: 119.99 },
            { nombre: "Sudadera Capucha", categoria: "Ropa", precio: 44.99 },
            { nombre: "Mancuernas 5kg", categoria: "Deportes", precio: 34.99 },
            { nombre: "Espejo Decorativo", categoria: "Hogar", precio: 54.99 }
        ];

        let productosFiltrados = [...todosLosProductos];
        let paginaActual = 1;
        const productosPorPagina = 9;

        function filtrarProductos() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoria = document.getElementById('categoryFilter').value;
            const sortOrder = document.getElementById('sortPrice').value;

            // Filtrar por b√∫squeda y categor√≠a
            productosFiltrados = todosLosProductos.filter(producto => {
                const matchSearch = producto.nombre.toLowerCase().includes(searchTerm);
                const matchCategory = !categoria || producto.categoria === categoria;
                return matchSearch && matchCategory;
            });

            // Ordenar por precio
            if (sortOrder === 'asc') {
                productosFiltrados.sort((a, b) => a.precio - b.precio);
            } else if (sortOrder === 'desc') {
                productosFiltrados.sort((a, b) => b.precio - a.precio);
            }

            paginaActual = 1;
            mostrarProductos();
        }

        function mostrarProductos() {
            const grid = document.getElementById('productosGrid');
            const noResults = document.getElementById('noResults');
            const resultsCount = document.getElementById('resultsCount');

            // Calcular productos para la p√°gina actual
            const inicio = (paginaActual - 1) * productosPorPagina;
            const fin = inicio + productosPorPagina;
            const productosPagina = productosFiltrados.slice(inicio, fin);

            if (productosFiltrados.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                document.getElementById('pagination').innerHTML = '';
                return;
            }

            grid.style.display = 'grid';
            noResults.style.display = 'none';

            grid.innerHTML = productosPagina.map(producto => `
                <div class="producto-card">
                    <div class="producto-nombre">${producto.nombre}</div>
                    <span class="producto-categoria">${producto.categoria}</span>
                    <div class="producto-precio">$${producto.precio.toFixed(2)}</div>
                </div>
            `).join('');

            mostrarPaginacion();
        }

        function mostrarPaginacion() {
            const totalPaginas = Math.ceil(productosFiltrados.length / productosPorPagina);
            const paginationDiv = document.getElementById('pagination');

            if (totalPaginas <= 1) {
                paginationDiv.innerHTML = '';
                return;
            }

            let html = `
                <button onclick="cambiarPagina(${paginaActual - 1})" ${paginaActual === 1 ? 'disabled' : ''}>
                    ‚Üê Anterior
                </button>
            `;

            for (let i = 1; i <= totalPaginas; i++) {
                if (i === 1 || i === totalPaginas || (i >= paginaActual - 1 && i <= paginaActual + 1)) {
                    html += `
                        <button onclick="cambiarPagina(${i})" class="${i === paginaActual ? 'active' : ''}">
                            ${i}
                        </button>
                    `;
                } else if (i === paginaActual - 2 || i === paginaActual + 2) {
                    html += '<button disabled>...</button>';
                }
            }

            html += `
                <button onclick="cambiarPagina(${paginaActual + 1})" ${paginaActual === totalPaginas ? 'disabled' : ''}>
                    Siguiente ‚Üí
                </button>
            `;

            paginationDiv.innerHTML = html;
        }

        function cambiarPagina(pagina) {
            paginaActual = pagina;
            mostrarProductos();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filtrarProductos);
        document.getElementById('categoryFilter').addEventListener('change', filtrarProductos);
        document.getElementById('sortPrice').addEventListener('change', filtrarProductos);

        // Inicializar
        mostrarProductos();
    </script>
</body>
</html>
